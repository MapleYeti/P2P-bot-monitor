<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DreamBot Dashboard</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>ü§ñ DreamBot Dashboard</h1>
            <div class="status-indicator" id="statusIndicator">
                <span class="status-dot" id="statusDot"></span>
                <span class="status-text" id="statusText">Stopped</span>
            </div>
        </header>

        <main class="main-content">
            <!-- Monitoring Control Section -->
            <section class="control-section">
                <h2>üéÆ Monitoring Control</h2>
                <div class="control-buttons">
                    <button type="button" id="toggleMonitoringBtn" class="btn btn-primary">Start Monitoring</button>
                </div>
                
                <!-- Bot Status Table -->
                         <div class="bot-status-section">
             <h3>ü§ñ Bot Status</h3>
             <div class="bot-status-table">
                 <div class="table-header">
                     <span class="bot-name-header">Bot Name</span>
                     <span class="bot-status-header">Status</span>
                     <span class="bot-actions-header">Actions</span>
                 </div>
                 <div id="botStatusList" class="bot-status-list">
                     <!-- Bot status rows will be added here dynamically -->
                 </div>
             </div>
             
         </div>
            </section>

            <!-- Configuration Section -->
            <section class="config-section">
                <div class="accordion-header" id="configAccordionHeader">
                    <div class="accordion-title">
                        <h2>‚öôÔ∏è Configuration</h2>
                        <div class="config-status" id="configStatus">
                            <span>‚úÖ Saved</span>
                        </div>
                    </div>
                    <button class="accordion-toggle" id="configAccordionToggle">
                        <span class="toggle-icon">‚ñº</span>
                    </button>
                </div>
                <div class="accordion-content" id="configAccordionContent">
                    <div class="config-form">
                        <div class="form-group">
                            <label for="logsDir">DreamBot Logs Directory:</label>
                            <div class="input-group">
                                <input type="text" id="logsDir" placeholder="C:\Users\username\DreamBot\Logs" readonly>
                                <button type="button" id="selectDirBtn" class="btn btn-secondary">Browse</button>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="chatWebhook">General Chat Webhook URL:</label>
                            <input type="text" id="chatWebhook" placeholder="https://discord.com/api/webhooks/...">
                        </div>

                        <div class="form-group">
                            <label for="vipFeatures">DreamBot VIP Features</label>
                            <div class="checkbox-container">
                                <input type="checkbox" id="vipFeatures">
                                <small class="form-help">Enable advanced features like CLI bot launching. Requires DreamBot VIP subscription.</small>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Bot Configurations</label>
                            <div id="botWebhooks" class="bot-webhooks">
                                <!-- Bot webhooks will be added here dynamically -->
                            </div>
                            <button type="button" id="addBotBtn" class="btn btn-secondary">+ Add Bot</button>
                        </div>

                        <div class="form-actions">
                            <div class="button-row">
                                <button type="button" id="saveConfigBtn" class="btn btn-primary">Save Configuration</button>
                                <button type="button" id="undoChangesBtn" class="btn btn-warning" onclick="configUI.undoChanges()" disabled>Undo Changes</button>
                                <button type="button" id="loadConfigBtn" class="btn btn-secondary">Import Configuration</button>
                                <button type="button" id="exportConfigBtn" class="btn btn-secondary">Export Configuration</button>
                            </div>
                            <div class="form-help">
                                <small>üí° Import Configuration: Select a JSON file to import and overwrite current settings</small><br>
                                <small>üí° Export Configuration: Save current settings to a JSON file in the new standardized format</small>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Log Display Section -->
            <section class="logs-section">
                <h2>üìã Live Logs</h2>
                <div class="logs-container">
                    <div class="logs-header">
                        <span>Recent Activity</span>
                        <button type="button" id="clearLogsBtn" class="btn btn-small">Clear</button>
                    </div>
                    <div id="logsDisplay" class="logs-display">
                        <div class="no-logs">No logs yet. Start monitoring to see activity.</div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Bot Webhook Modal -->
    <div id="botModal" class="modal">
        <div class="modal-content">
            <h3>Add Bot Webhook</h3>
            <div class="form-group">
                <label for="botName">Bot Name (DreamBot Log Folder):</label>
                <input type="text" id="botName" placeholder="MyBot">
            </div>
            <div class="form-group">
                <label for="botWebhook">Discord Webhook URL:</label>
                <input type="text" id="botWebhook" placeholder="https://discord.com/api/webhooks/...">
            </div>
            <div class="form-group">
                <label for="botLaunchCLI">Launch CLI Command (Optional):</label>
                <input type="text" id="botLaunchCLI" placeholder="java -jar DreamBot.jar -script MyScript -world 301">
                <small class="form-help">Optional: Command to run in a new terminal window when launching this bot. <strong>Requires DreamBot VIP subscription.</strong> Leave empty if not needed.</small>
            </div>
            <div class="modal-actions">
                <button type="button" id="saveBotBtn" class="btn btn-primary">Save</button>
                <button type="button" id="cancelBotBtn" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Edit Bot Modal -->
    <div id="editBotModal" class="modal">
        <div class="modal-content">
            <h3>Edit Bot</h3>
            <div class="form-group">
                <label for="editBotName">Bot Name (DreamBot Log Folder):</label>
                <input type="text" id="editBotName" placeholder="MyBot">
            </div>
            <div class="form-group">
                <label for="botWebhook">Discord Webhook URL:</label>
                <input type="text" id="editBotWebhook" placeholder="https://discord.com/api/webhooks/...">
            </div>
            <div class="form-group">
                <label for="editBotLaunchCLI">Launch CLI Command (Optional):</label>
                <input type="text" id="editBotLaunchCLI" placeholder="java -jar DreamBot.jar -script MyScript -world 301">
                <small class="form-help">Optional: Command to run in a new terminal window when launching this bot. <strong>Requires DreamBot VIP subscription.</strong> Leave empty if not needed.</small>
            </div>
            <div class="modal-actions">
                <button type="button" id="saveEditBotBtn" class="btn btn-primary">Save Changes</button>
                <button type="button" id="cancelEditBotBtn" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <script type="module" src="renderer.js"></script>
</body>
</html>
